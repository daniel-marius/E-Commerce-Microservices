cd auth
docker build -t daniel/auth .
// Run this command after updating common packages
npm update @ticketsms/common

Restart minikube
minikube delete
minikube start

Set JWT as a secret:
kubectl create secret generic jwt-secret --from-literal=JWT_KEY=...

Install and enable ingress controller:
kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/master/deploy/static/provider/cloud/deploy.yaml
minikube addons enable ingress

cd client
docker build -t daniel/client .

// Connect from react to nginx
kubectl get namespace
kubectl get services
kubectl get services -n kube-system
kubectl expose deployment ingress-nginx-controller --target-port=80 --type=NodePort -n kube-system

cd common
npm version patch (increment version)
npm run build
npm login
npm publish --access public
npm update @ticketsms/common

cd tickets
docker build -t daniel/tickets .
npm update @ticketsms/common

cd nats-test
kubectl get pods
kubectl port-forward nats-depl-id 4222:4222

cd ticketmsapp
skaffold dev

cd orders
docker build -t daniel/orders .
npm update @ticketsms/common

cd expiration
docker build -t daniel/expiration .
npm update @ticketsms/common

cd payments
docker build -t daniel/payments .
npm update @ticketsms/common
